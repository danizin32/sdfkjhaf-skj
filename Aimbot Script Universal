--[[ Script feito por ChatGPT a pedido para fins de testes com autorização
     Inclui ESP com TeamCheck, Aimbot com FOV ajustável e Interface estilizada preta/vermelha ]]--

-- SERVIÇOS
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local Mouse = LocalPlayer:GetMouse()

-- VARIÁVEIS
local AimbotEnabled = false
local ESPEnabled = false
local FOVRadius = 100

-- CRIAR INTERFACE
local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
ScreenGui.Name = "AimESP_UI"
local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 220, 0, 250)
MainFrame.Position = UDim2.new(0, 20, 0, 150)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
MainFrame.BorderSizePixel = 2
MainFrame.BorderColor3 = Color3.fromRGB(255, 0, 0)
MainFrame.Active = true
MainFrame.Draggable = true

local UIListLayout = Instance.new("UIListLayout", MainFrame)
UIListLayout.Padding = UDim.new(0, 6)
UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

local function createButton(name, callback)
	local btn = Instance.new("TextButton", MainFrame)
	btn.Size = UDim2.new(0, 200, 0, 30)
	btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	btn.BorderSizePixel = 2
	btn.BorderColor3 = Color3.fromRGB(100, 0, 0)
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Text = name
	btn.Font = Enum.Font.SourceSansBold
	btn.TextSize = 16

	local isActive = false
	btn.MouseButton1Click:Connect(function()
		isActive = not isActive
		btn.BackgroundColor3 = isActive and Color3.fromRGB(150, 0, 0) or Color3.fromRGB(30, 30, 30)
		callback(isActive)
	end)
end

-- FOV CÍRCULO
local FOVCircle = Drawing.new("Circle")
FOVCircle.Color = Color3.fromRGB(255, 0, 0)
FOVCircle.Thickness = 1
FOVCircle.NumSides = 64
FOVCircle.Filled = false
FOVCircle.Radius = FOVRadius
FOVCircle.Visible = true
FOVCircle.Position = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)

-- FUNÇÕES
local function getClosestEnemy()
	local closest = nil
	local shortestDistance = FOVRadius

	for _, player in ipairs(Players:GetPlayers()) do
		if player ~= LocalPlayer and player.Team ~= LocalPlayer.Team and player.Character and player.Character:FindFirstChild("Head") then
			local screenPos, onScreen = Camera:WorldToViewportPoint(player.Character.Head.Position)
			if onScreen then
				local dist = (Vector2.new(screenPos.X, screenPos.Y) - Vector2.new(Mouse.X, Mouse.Y)).Magnitude
				if dist < shortestDistance then
					shortestDistance = dist
					closest = player
				end
			end
		end
	end
	return closest
end

-- ESP
local ESPBoxes = {}
local function updateESP()
	for _, box in pairs(ESPBoxes) do
		box:Remove()
	end
	ESPBoxes = {}

	if not ESPEnabled then return end

	for _, player in ipairs(Players:GetPlayers()) do
		if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") and player.Team ~= LocalPlayer.Team then
			local rootPart = player.Character.HumanoidRootPart
			local head = player.Character:FindFirstChild("Head")
			if head then
				local pos, visible = Camera:WorldToViewportPoint(rootPart.Position)
				if visible then
					local box = Drawing.new("Square")
					box.Size = Vector2.new(60, 90)
					box.Position = Vector2.new(pos.X - 30, pos.Y - 90)
					box.Color = Color3.fromRGB(255, 0, 0)
					box.Thickness = 2
					box.Visible = true
					table.insert(ESPBoxes, box)
				end
			end
		end
	end
end

-- AIMBOT LOOP
RunService.RenderStepped:Connect(function()
	FOVCircle.Position = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
	FOVCircle.Radius = FOVRadius

	if AimbotEnabled then
		local target = getClosestEnemy()
		if target and target.Character and target.Character:FindFirstChild("Head") then
			Camera.CFrame = CFrame.new(Camera.CFrame.Position, target.Character.Head.Position)
		end
	end
	updateESP()
end)

-- BOTÕES DA UI
createButton("Aimbot", function(state)
	AimbotEnabled = state
end)

createButton("ESP", function(state)
	ESPEnabled = state
end)

createButton("Aumentar FOV", function()
	FOVRadius = math.min(FOVRadius + 10, 500)
end)

createButton("Diminuir FOV", function()
	FOVRadius = math.max(FOVRadius - 10, 10)
end)

-- CRÉDITOS
local credit = Instance.new("TextLabel", MainFrame)
credit.Size = UDim2.new(0, 200, 0, 30)
credit.BackgroundTransparency = 1
credit.TextColor3 = Color3.fromRGB(255, 0, 0)
credit.Text = "Criado por ChatGPT - Testes Autorizados"
credit.Font = Enum.Font.SourceSansBold
credit.TextSize = 14
credit.TextWrapped = true

-- FIM DO SCRIPT
